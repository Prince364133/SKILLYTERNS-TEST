<!-- Firebase Quiz Platform - Initial Setup -->
<!-- Teacher Panel hosted on GitHub and Student Panel embedded in Odoo Website -->

<!-- index.html for Teacher Side (GitHub Hosted) -->
<!DOCTYPE html>
<html>
<head>
  <title>Teacher Panel - Create Quiz</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .question-box { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; }
    .option { margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Create Quiz</h1>
  <input id="testTitle" placeholder="Enter Test Title"><br><br>
  <div id="questionsContainer"></div>
  <button onclick="addQuestion()">Add Question</button>
  <button onclick="uploadTest()">Upload Test</button>
  <script>
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAGPyk54-zJUE6iV3872XKLIq9OW3KCM6o",
  authDomain: "skillyterns.firebaseapp.com",
  projectId: "skillyterns",
  storageBucket: "skillyterns.firebasestorage.app",
  messagingSenderId: "1034584532277",
  appId: "1:1034584532277:web:fb79e2d96ee5127421d87c",
  measurementId: "G-5G2GCWYEPL"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let test = { title: '', questions: [] };

    function addQuestion() {
      const index = test.questions.length;
      const container = document.getElementById('questionsContainer');
      const box = document.createElement('div');
      box.className = 'question-box';
      box.innerHTML = `
        <input placeholder='Enter Question' class='q${index}'><br>
        <div class='options${index}'>
          <input placeholder='Option 1' class='opt${index}0'><input type='radio' name='correct${index}' value='0'><br>
          <input placeholder='Option 2' class='opt${index}1'><input type='radio' name='correct${index}' value='1'><br>
          <input placeholder='Option 3' class='opt${index}2'><input type='radio' name='correct${index}' value='2'><br>
          <input placeholder='Option 4' class='opt${index}3'><input type='radio' name='correct${index}' value='3'><br>
        </div>`;
      container.appendChild(box);
    }

    function uploadTest() {
      const title = document.getElementById('testTitle').value;
      test.title = title;
      const boxes = document.querySelectorAll('.question-box');
      boxes.forEach((box, i) => {
        const question = document.querySelector(`.q${i}`).value;
        const options = [0,1,2,3].map(j => document.querySelector(`.opt${i}${j}`).value);
        const correct = document.querySelector(`input[name='correct${i}']:checked`).value;
        test.questions.push({ question, options, correct });
      });
      const testId = Date.now();
      db.ref('quizzes/' + testId).set(test).then(() => alert('Test Uploaded!'));
    }
  </script>
</body>
</html>

